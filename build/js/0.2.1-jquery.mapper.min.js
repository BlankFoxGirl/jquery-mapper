!function(e){"use strict";e.fn.mapper=function(t){this.settings=e.extend({Title:"Hej!",ApiKey:"YOUR_APIKEY",Debug:!0,Mode:"Locations",FocusLocation:{lat:-33.863276,lng:151.107977},MapSize:{height:400,width:400},Locations:[{name:"My Location",text:"We sell cool stuff.",address:"123 Appleberry Way",phone:"08 12134 5678",lat:-33.863276,lng:151.107977},{name:"My Location 2",text:"We sell cool stuff.",address:"189 Appleberry Way",phone:"08 12134 5679",lat:-33.782066,lng:151.101867}]},t),this.settings.Debug&&console.log("Started!",this),this.map=null,this.markers=[],this.infoWindow=new google.maps.InfoWindow,this.mapMode=()=>{switch(this.settings.Mode){case"Locations":var t=document.createElement("div");t.classList="jquery-mapper-controls",t.id="MapControls";var a="";e.each(this.settings.Locations,(t,s)=>{var i=new google.maps.LatLng(parseFloat(s.lat),parseFloat(s.lng)),n=new google.maps.Marker({map:this.map,position:i,label:{text:s.name,fontWeight:"bold"},animation:google.maps.Animation.DROP}),o="";"undefined"!=typeof s.icon&&(o='<img src="'+s.icon+'" alt="'+s.name+'" title="'+s.name+'">');var r='<div data-marker-index="'+t+'" class="location-item'+(""!==o?" icon-supplied":"")+'">'+o+'<span class="title">'+s.name+'</span><span class="phone">'+s.phone+'</span><span class="address">'+s.address+'</span><span class="text">'+s.text+"</span></div>";google.maps.event.addListener(n,"click",()=>{this.infoWindow.setContent(r),this.infoWindow.open(this.map,n),e("#MapControls").children().each((t,a)=>{e(a).removeClass("active")}),e("#MapControls>.location-item[data-marker-index='"+t+"']").addClass("active")}),this.markers.push(n),a+=r}),this.append('<div class="jquery-mapper-controls" id="MapControls">'+a+"</div>"),e("#MapControls>.location-item[data-marker-index]").on("click",t=>{let a=t.currentTarget.getAttribute("data-marker-index");console.log(t.currentTarget,a),this.infoWindow.setContent('<div class="location-item'+(e(t.currentTarget).hasClass("icon-supplied")?" icon-supplied":"")+'">'+e(t.currentTarget).html()+"</div>"),this.infoWindow.open(this.map,this.markers[a]),e("#MapControls").children().each((t,a)=>{this.settings.Debug&&console.log(t),e(a).removeClass("active")}),e(t.currentTarget).addClass("active")})}},this.init=()=>{switch(this.settings.Mode){case"Locations":e(this).addClass("jquery-mapper-container-locations")}e(this).addClass("jquery-mapper-container"),e(this).append('<div class="jquery-mapper-map" id="MyMap">lorem</div>'),this.map=new google.maps.Map(e(".jquery-mapper-map")[0],{center:this.settings.FocusLocation,zoom:11,mapTypeId:"roadmap"}),this.mapMode()},this.init()}}(jQuery);